(function(e){function t(t){for(var i,r,c=t[0],o=t[1],l=t[2],u=0,p=[];u<c.length;u++)r=c[u],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&p.push(a[r][0]),a[r]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);h&&h(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],i=!0,r=1;r<n.length;r++){var o=n[r];0!==a[o]&&(i=!1)}i&&(s.splice(t--,1),e=c(c.s=n[0]))}return e}var i={},a={app:0},s=[];function r(e){return c.p+"js/"+({about:"about"}[e]||e)+"."+{about:"4a713b3d"}[e]+".js"}function c(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,i){n=a[e]=[t,i]}));t.push(n[2]=i);var s,o=document.createElement("script");o.charset="utf-8",o.timeout=120,c.nc&&o.setAttribute("nonce",c.nc),o.src=r(e);var l=new Error;s=function(t){o.onerror=o.onload=null,clearTimeout(u);var n=a[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+i+": "+s+")",l.name="ChunkLoadError",l.type=i,l.request=s,n[1](l)}a[e]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:o})}),12e4);o.onerror=o.onload=s,document.head.appendChild(o)}return Promise.all(t)},c.m=e,c.c=i,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)c.d(n,i,function(t){return e[t]}.bind(null,i));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/puzzles/",c.oe=function(e){throw console.error(e),e};var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var h=l;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"48ca":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("7a23");function a(e,t){var n=Object(i["z"])("router-view");return Object(i["s"])(),Object(i["d"])(n)}n("b6b4");const s={};s.render=a;var r=s,c=(n("d3b7"),n("3ca3"),n("ddb0"),n("6c02")),o={class:"home"};function l(e,t,n,a,s,r){var c=Object(i["z"])("PentominoBoard");return Object(i["s"])(),Object(i["f"])("div",o,[Object(i["i"])(c)])}Object(i["v"])("data-v-2cdddc69");var u=["onClick"],h=["onClick"],p={key:0,class:"hole_wrapper"},f={class:"score"},b=Object(i["g"])("h3",null,"Score:",-1),v={class:"message"};function m(e,t,n,a,s,r){var c=Object(i["z"])("PentominoShape");return Object(i["s"])(),Object(i["f"])(i["a"],null,[Object(i["g"])("button",{onClick:t[0]||(t[0]=Object(i["E"])((function(){return r.start&&r.start.apply(r,arguments)}),["stop"]))},"Start"),Object(i["g"])("div",{class:"board",onContextmenu:t[1]||(t[1]=Object(i["E"])((function(){}),["prevent"])),onMouseup:t[2]||(t[2]=function(){return r.handle_click&&r.handle_click.apply(r,arguments)}),onMousemove:t[3]||(t[3]=function(){return r.handle_move&&r.handle_move.apply(r,arguments)}),onWheel:t[4]||(t[4]=Object(i["E"])((function(){return r.handle_wheel&&r.handle_wheel.apply(r,arguments)}),["prevent"]))},[(Object(i["s"])(!0),Object(i["f"])(i["a"],null,Object(i["y"])(s.game.pieces,(function(e,t){return Object(i["s"])(),Object(i["f"])("div",{class:"box_piece",style:Object(i["o"])({"grid-area":"piece"+t}),key:t,onClick:Object(i["E"])((function(e){return s.game.pick_up(t)}),["stop"])},[e?(Object(i["s"])(),Object(i["d"])(c,{key:0,shape:e.shape,grain:e.horizontal?"h":"v",color:"brown",outline:"black"},null,8,["shape","grain"])):Object(i["e"])("",!0)],12,u)})),128)),(Object(i["s"])(!0),Object(i["f"])(i["a"],null,Object(i["y"])(s.game.holes,(function(e,t){return Object(i["s"])(),Object(i["f"])("div",{class:"hole_space",style:Object(i["o"])({"grid-area":"hole"+t}),key:t,onClick:function(e){return r.place_piece(e,t)}},[e?(Object(i["s"])(),Object(i["f"])("div",p,[Object(i["i"])(c,{shape:e.shape,color:r.warning_color(e.hole_warning(),"black"),border:2},null,8,["shape","color"]),(Object(i["s"])(!0),Object(i["f"])(i["a"],null,Object(i["y"])(e.pieces,(function(t,n){return Object(i["s"])(),Object(i["f"])("div",{key:n,class:"hole_piece",style:Object(i["o"])({position:"absolute",left:30*(t.j+2)+"px",top:30*(t.i+2)+"px"})},[n==e.pieces.length-1?(Object(i["s"])(),Object(i["d"])(c,{key:0,shape:t.piece.shape,grain:t.piece.horizontal?"h":"v",color:r.warning_color(e.piece_warning(),"sienna"),outline:"black"},null,8,["shape","grain","color"])):(Object(i["s"])(),Object(i["d"])(c,{key:1,shape:t.piece.shape,grain:t.piece.horizontal?"h":"v",color:"sienna",outline:"black"},null,8,["shape","grain"]))],4)})),128))])):Object(i["e"])("",!0)],12,h)})),128)),Object(i["g"])("div",{class:"active_piece",style:Object(i["o"])({position:"absolute",left:s.mouse_x-30+"px",top:s.mouse_y-30+"px"})},[s.game.active_piece?(Object(i["s"])(),Object(i["d"])(c,{key:0,shape:s.game.active_piece.shape,grain:s.game.active_piece.horizontal?"h":"v",color:"brown",outline:"black"},null,8,["shape","grain"])):Object(i["e"])("",!0)],4),Object(i["g"])("div",f,[b,Object(i["h"])(" "+Object(i["B"])(s.game.score),1)]),Object(i["g"])("div",v,[(Object(i["s"])(!0),Object(i["f"])(i["a"],null,Object(i["y"])(s.game.messages,(function(e,t){return Object(i["s"])(),Object(i["f"])("div",{key:t},Object(i["B"])(e),1)})),128))])],32)],64)}Object(i["t"])();n("a9e3");Object(i["v"])("data-v-ce38775a");var d={class:"shape"},j=["data-i","data-j"];function g(e,t,n,a,s,r){return Object(i["s"])(),Object(i["f"])("div",d,[(Object(i["s"])(!0),Object(i["f"])(i["a"],null,Object(i["y"])(r.rows,(function(e){return Object(i["s"])(),Object(i["f"])("div",{key:e,class:"row"},[(Object(i["s"])(!0),Object(i["f"])(i["a"],null,Object(i["y"])(r.cols,(function(t){return Object(i["s"])(),Object(i["f"])("div",{key:t,class:"cell",style:Object(i["o"])(r.cell_style(e,t)),"data-i":e,"data-j":t},null,12,j)})),128))])})),128))])}Object(i["t"])();n("caad"),n("2532");var O=n("2ef0"),y=n.n(O),_={name:"PentominoShape",props:{shape:Object,color:String,outline:String,border:{type:Number,default:0},grain:{type:String,default:""}},computed:{rows:function(){return y.a.range(-this.border,this.shape.i_max()+this.border+1)},cols:function(){return y.a.range(-this.border,this.shape.j_max()+this.border+1)}},methods:{cell_style:function(e,t){var n={};return this.shape.includes([e,t])&&(n.background=this.color,"h"==this.grain&&(n["border-top"]="1px solid black"),"v"==this.grain&&(n["border-left"]="1px solid black"),this.outline&&(this.shape.includes([e-1,t])||(n["border-top"]="2px solid "+this.outline),this.shape.includes([e+1,t])||(n["border-bottom"]="2px solid "+this.outline),this.shape.includes([e,t-1])||(n["border-left"]="2px solid "+this.outline),this.shape.includes([e,t+1])||(n["border-right"]="2px solid "+this.outline))),n}}};n("750f");_.render=g,_.__scopeId="data-v-ce38775a";var k=_,w=n("b85c"),x=n("d4ec"),q=n("bee2"),z=(n("b0c0"),n("d81d"),n("3835")),P=(n("4de4"),function(){function e(t){Object(x["a"])(this,e),this.squares=t}return Object(q["a"])(e,[{key:"add",value:function(e){this.squares.push(e)}},{key:"i_min",value:function(e){var t=this.squares;return void 0!=e&&(t=y.a.filter(t,(function(t){return t[1]==e}))),y.a.min(y.a.map(t,(function(e){return e[0]})))}},{key:"j_min",value:function(e){var t=this.squares;return void 0!=e&&(t=y.a.filter(t,(function(t){return t[0]==e}))),y.a.min(y.a.map(t,(function(e){return e[1]})))}},{key:"i_max",value:function(e){var t=this.squares;return void 0!=e&&(t=y.a.filter(t,(function(t){return t[1]==e}))),y.a.max(y.a.map(t,(function(e){return e[0]})))}},{key:"j_max",value:function(e){var t=this.squares;return void 0!=e&&(t=y.a.filter(t,(function(t){return t[0]==e}))),y.a.max(y.a.map(t,(function(e){return e[1]})))}},{key:"difference",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];return new e(y.a.differenceWith(this.squares,y.a.map(t.squares,(function(e){var t=Object(z["a"])(e,2),i=t[0],a=t[1];return[i+n[0],a+n[1]]})),y.a.isEqual))}},{key:"overlaps",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];return y.a.intersectionWith(this.squares,y.a.map(e.squares,(function(e){var n=Object(z["a"])(e,2),i=n[0],a=n[1];return[i+t[0],a+t[1]]})),y.a.isEqual).length>0}},{key:"includes",value:function(e){var t,n=Object(w["a"])(this.squares);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(y.a.isEqual(e,i))return!0}}catch(a){n.e(a)}finally{n.f()}return!1}},{key:"empty",value:function(){return 0==this.squares.length}},{key:"rot_cw",value:function(){var e=this.i_max();this.squares=y.a.map(this.squares,(function(t){var n=Object(z["a"])(t,2),i=n[0],a=n[1];return[a,e-i]}))}},{key:"rot_ccw",value:function(){var e=this.j_max();this.squares=y.a.map(this.squares,(function(t){var n=Object(z["a"])(t,2),i=n[0],a=n[1];return[e-a,i]}))}},{key:"flip",value:function(){var e=this.j_max();this.squares=y.a.map(this.squares,(function(t){var n=Object(z["a"])(t,2),i=n[0],a=n[1];return[i,e-a]}))}}],[{key:"from_grid",value:function(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],a=[],s=Object(w["a"])(Object(O["range"])(t.length));try{for(s.s();!(n=s.n()).done;){var r,c=n.value,o=Object(w["a"])(Object(O["range"])(t[c].length));try{for(o.s();!(r=o.n()).done;){var l=r.value;t[c][l]&&a.push([c+i[0],l+i[1]])}}catch(u){o.e(u)}finally{o.f()}}}catch(u){s.e(u)}finally{s.f()}return new e(a)}}]),e}()),S=[{name:"P1",weight:22,shape:[[1,1],[1,1],[1,0]]},{name:"P2",weight:22,shape:[[1,1,1],[1,1,0]]},{name:"F1",weight:14,shape:[[0,1,1],[1,1,0],[0,1,0]]},{name:"F2",weight:14,shape:[[0,1,0],[1,1,1],[1,0,0]]},{name:"Y",weight:28,shape:[[1,1,1,1],[0,1,0,0]]},{name:"N",weight:16,shape:[[1,1,1,0],[0,0,1,1]]},{name:"L",weight:16,shape:[[1,1,1,1],[0,0,0,1]]},{name:"T1",weight:7,shape:[[1,1,1],[0,1,0],[0,1,0]]},{name:"T2",weight:7,shape:[[1,0,0],[1,1,1],[1,0,0]]},{name:"W",weight:8,shape:[[1,0,0],[1,1,0],[0,1,1]]},{name:"V",weight:8,shape:[[1,0,0],[1,0,0],[1,1,1]]},{name:"U1",weight:4,shape:[[1,1],[1,0],[1,1]]},{name:"U2",weight:4,shape:[[1,0,1],[1,1,1]]},{name:"Z1",weight:4,shape:[[1,1,0],[0,1,0],[0,1,1]]},{name:"Z2",weight:4,shape:[[1,0,0],[1,1,1],[0,0,1]]},{name:"X",weight:6,shape:[[0,1,0],[1,1,1],[0,1,0]]},{name:"I",weight:4,shape:[[1,1,1,1,1]]}],E=S.map((function(e){return e.weight})).reduce((function(e,t){return e+t}),0),C=function(){function e(t,n){Object(x["a"])(this,e),this.shape=P.from_grid(t),this.name=n,this.horizontal=!0}return Object(q["a"])(e,[{key:"height",get:function(){return this.shape.length}},{key:"width",get:function(){return y.a.max(this.shape.map((function(e){return e.length})))||0}},{key:"rot_cw",value:function(){this.shape.rot_cw(),this.horizontal=!this.horizontal}},{key:"rot_ccw",value:function(){this.shape.rot_ccw(),this.horizontal=!this.horizontal}},{key:"flip",value:function(){this.shape.flip()}}],[{key:"random",value:function(){var t,n=Math.random()*E,i=0,a=Object(w["a"])(S);try{for(a.s();!(t=a.n()).done;){var s=t.value;if(i+=s.weight,i>n)return new e(s.shape,s.name)}}catch(r){a.e(r)}finally{a.f()}}}]),e}(),B=n("2909"),M=(n("159b"),6),T=8,L=10,N=8;function W(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;if(e<M||t<1)return null;if(e<=T)return[e];var n,i=y.a.shuffle(Object(O["range"])(M,T+1)),a=Object(w["a"])(i);try{for(a.s();!(n=a.n()).done;){var s=n.value,r=W(e-s,t-1);if(r)return r.push(s),r}}catch(c){a.e(c)}finally{a.f()}return null}var G=function(){function e(t,n){Object(x["a"])(this,e),this.shape=t,this.size=n,this.pieces=[],this.timer=N,this.moves=0}return Object(q["a"])(e,[{key:"can_place",value:function(e,t,n){return!!n&&this.remaining_shape().overlaps(n.shape,[e,t])}},{key:"add_piece",value:function(e,t,n){this.pieces.push({i:e,j:t,piece:n}),this.timer=N,this.moves=this.moves+1}},{key:"piece_warning",value:function(){return this.pieces.length&&this.timer<=2?this.timer:0}},{key:"hole_warning",value:function(){return 0==this.pieces.length&&this.timer<=3?this.timer:0}},{key:"step_timer",value:function(){if(this.timer=this.timer-1,this.timer<=0){if(this.pieces.length)this.pieces.pop();else{var e=y.a.random(this.shape.i_min(),this.shape.i_max()),t=y.a.random(1)?this.shape.j_min(e)-1:this.shape.j_max(e)+1;this.shape.add([e,t])}this.timer=N}}},{key:"remaining_shape",value:function(){var e,t=this.shape,n=Object(w["a"])(this.pieces);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=i.piece,s=i.i,r=i.j;t=t.difference(a.shape,[s,r])}}catch(c){n.e(c)}finally{n.f()}return t}},{key:"filled",value:function(){return this.remaining_shape().empty()}}],[{key:"random",value:function(t){var n=W(5*t),i=[];return y.a.forEach(n,(function(e,t){var n=y.a.random(T-e);i.push.apply(i,Object(B["a"])(y.a.map(Object(O["range"])(e),(function(e){return[t,e+n]}))))})),new e(new P(i),t)}}]),e}(),H=function(){function e(){Object(x["a"])(this,e),this.hole_size=8,this.holes=[null,null,null,null],this.pieces=[null,null,null],this.active_piece=null,this.score=0,this.combo=0,this.messages=[]}return Object(q["a"])(e,[{key:"start",value:function(){this.holes=[null,null,null,null],this.pieces=[null,null,null],this.active_piece=null,this.score=0,this.combo=0,this.messages=[],this.make_holes(),this.make_pieces()}},{key:"make_holes",value:function(){var e,t=Object(w["a"])(y.a.range(this.holes.length));try{for(t.s();!(e=t.n()).done;){var n=e.value;null==this.holes[n]&&(this.holes[n]=G.random(this.hole_size))}}catch(i){t.e(i)}finally{t.f()}}},{key:"make_pieces",value:function(){var e,t=Object(w["a"])(y.a.range(this.pieces.length));try{for(t.s();!(e=t.n()).done;){var n=e.value;null==this.pieces[n]&&(this.pieces[n]=C.random())}}catch(i){t.e(i)}finally{t.f()}}},{key:"pick_up",value:function(e){var t=[this.pieces[e],this.active_piece];this.active_piece=t[0],this.pieces[e]=t[1]}},{key:"flip",value:function(){this.active_piece&&this.active_piece.flip()}},{key:"rot_cw",value:function(){this.active_piece&&this.active_piece.rot_cw()}},{key:"rot_ccw",value:function(){this.active_piece&&this.active_piece.rot_ccw()}},{key:"place_active_piece",value:function(e,t,n){var i=this.holes[e];if(i.can_place(t,n,this.active_piece)){i.add_piece(t,n,this.active_piece),this.active_piece=null,this.make_pieces();var a,s=Object(w["a"])(this.holes);try{for(s.s();!(a=s.n()).done;){var r=a.value;r==i||r.filled()||r.step_timer()}}catch(c){s.e(c)}finally{s.f()}this.score_hole(i),this.check_filled_holes()}}},{key:"score_hole",value:function(e){if(e.filled()){var t=e.moves-e.size;0==t?(this.combo=this.combo+1,this.score=this.score+80+20*this.combo,this.messages=["Perfect!"],this.combo>1&&(this.messages=["Perfect x"+this.combo+"!"])):1==t?(this.combo=0,this.score=this.score+80,this.messages=["Good"]):2==t?(this.combo=0,this.score=this.score+60,this.messages=["Ok"]):(this.combo=0,this.score=this.score+40,this.messages=["Hmmmm"]),e.pieces.every((function(e){return e.piece.horizontal}))&&(this.messages.push(" Grain Bonus!"),this.score=this.score+20),e.pieces.every((function(t){return t.piece.name[0]==e.pieces[0].piece.name[0]}))&&(this.messages.push(" Set Bonus!"),this.score=this.score+20)}}},{key:"check_filled_holes",value:function(){var e=y.a.map(this.holes,(function(e){return e.filled()}));e[0]&&e[1]&&e[2]?this.holes=[this.holes[3],null,null,null]:e[0]&&e[1]&&e[3]?this.holes=[null,this.holes[2],null,null]:e[0]&&e[2]&&e[3]?this.holes=[null,null,this.holes[1],null]:e[1]&&e[2]&&e[3]?this.holes=[null,null,null,this.holes[0]]:e[0]&&e[1]?this.holes=[this.holes[2],this.holes[3],null,null]:e[2]&&e[3]?this.holes=[null,null,this.holes[0],this.holes[1]]:e[0]&&e[2]?this.holes=[this.holes[1],null,this.holes[3],null]:e[1]&&e[3]&&(this.holes=[null,this.holes[0],null,this.holes[2]]),this.make_holes()}}]),e}(),I={name:"PentominoBoard",data:function(){return{game:new H,mouse_x:10,mouse_y:10}},components:{PentominoShape:k},methods:{start:function(){this.game.start()},handle_click:function(e){2==e.button&&this.game.flip()},handle_wheel:function(e){e.deltaY>0?this.game.rot_cw():this.game.rot_ccw()},handle_move:function(e){this.mouse_x=e.pageX,this.mouse_y=e.pageY},place_piece:function(e,t){if(e.target.classList.contains("cell")){var n=Number(e.target.dataset.i),i=Number(e.target.dataset.j);this.game.place_active_piece(t,n,i)}},warning_color:function(e,t){return 1==e?"red":2==e?"orange":3==e?"DarkGoldenRod":t}}};n("61fe");I.render=m,I.__scopeId="data-v-2cdddc69";var Y=I,A={name:"Home",components:{PentominoBoard:Y}};A.render=l;var F=A,J=[{path:"/",name:"Home",component:F},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],U=Object(c["a"])({history:Object(c["b"])("/puzzles/"),routes:J}),X=U;Object(i["c"])(r).use(X).mount("#app")},"61fe":function(e,t,n){"use strict";n("48ca")},"62e7":function(e,t,n){},"750f":function(e,t,n){"use strict";n("a14f")},a14f:function(e,t,n){},b6b4:function(e,t,n){"use strict";n("62e7")}});
//# sourceMappingURL=app.a83d932c.js.map